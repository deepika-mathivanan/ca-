<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Calculator</title>
  <link rel="stylesheet" href="cal.css">
</head>
<body>
  <div class="calculator">
    <input id="display" readonly>

    <div class="keys">
      <button data-a="C">C</button><button data-a="⌫">⌫</button><button data-v="%">%</button><button data-v="/">÷</button>
      <button data-v="7">7</button><button data-v="8">8</button><button data-v="9">9</button><button data-v="*">x</button>
      <button data-v="4">4</button><button data-v="5">5</button><button data-v="6">6</button><button data-v="-">-</button>
      <button data-v="1">1</button><button data-v="2">2</button><button data-v="3">3</button><button data-v="+">+</button>
      <button data-v="0" class="zero">0</button><button data-v=".">.</button><button data-a="=">=</button>
    </div>
  </div>

 <script>
const d = document.getElementById('display');


document.querySelector('.keys').onclick = e => {
  const v = e.target.dataset.v, a = e.target.dataset.a;
  if (!v && !a) return;
  handleKey(v, a);
};


document.addEventListener('keydown', e => {
  const key = e.key;

  if (/[0-9+\-*/.%]/.test(key)) {
    handleKey(key);                 // operators
  } else if (key === 'Enter' || key === '=') {
    handleKey(null, '=');           // equals
  } else if (key === 'Backspace') {
    handleKey(null, '⌫');           // delete
  } else if (key.toLowerCase() === 'c') {
    handleKey(null, 'C');           // clear
  }
});


function handleKey(v, a) {
  switch (a) {
    case 'C': d.value = ''; break;
    case '⌫': d.value = d.value.slice(0,-1); break;
    case '=': 
      try { d.value = Function('"use strict";return('+d.value+')')(); }
      catch { d.value = 'Error'; }
      break;
    default: d.value += v;
  }
}
</script>

</body>
</html>
